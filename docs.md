TODO:
- have to change registration to send pubkey and listening port

Known Problems:
- An random empheral port is used to register new peers. This could cause problems on networks with blocked ports.